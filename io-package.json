{
  "common": {
    "name": "fitbit-fitness-next",
    "version": "1.1.0",
    "nonNpm": false,
    "desc": {
      "en": "Many thanks to the creator of the adapter by Chris (besterquester). Extended and maintained by Pocky2507 — includes advanced sleep detection, nap handling, stability threshold, and heart-rate zone metrics. Retrieves Fitbit health, activity and sleep data with nap and early-sleep filtering.",
      "de": "Vielen Dank an den Ersteller des Adapters von Chris-656(besterquester). Erweiterung und Pflege durch Pocky2507 – enthält erweiterte Schlaferkennung, Nickerchen-Verarbeitung, Stabilitätsschwelle und Herzfrequenzzonen. Ruft Fitbit-Gesundheits-, Aktivitäts- und Schlafdaten ab (mit Nickerchen- und Frühschlaf-Filter)."
    },
    "authors": [
      "Pocky2507 <pocky@united-websites.org> (maintenance)",
      "Chris-656 <besterquester@live.at> (original author)"
    ],
    "repository": {
      "type": "git",
      "url": "https://github.com/Pocky2507/ioBroker.fitbit-fitness-next"
    },
    "news": {
      "1.1.0": {
        "en": "Preparation for personal AI analysis via history",
        "de": "Vorbereitung für persönliche KI Analyse über History."
      },
      "1.0.3": {
        "en": "Smart pre-filter for movie nights, reading, TV",
        "de": "Intelligenter Vorfilter für Filmabende, Lesen, Fernsehen."
      },
      "1.0.2": {
        "en": "Naps are checked for duration and heart-rate activity to exclude false naps (like resting or reading)",
        "de": "Nickerchen werden auf Dauer und Herzfrequenzaktivität überprüft, um falsche Nickerchen (z. B. Ruhen oder Lesen) auszuschließen."
      },
      "1.0.0": {
        "en": "Code completely cleaned up, sorted and re-nested, further fine-tuning of the sleep logic, ready for final version to 1.0.0",
        "de": "Code komplett aufgeräumt, sortiert und neu verschachtelt, nochmaliges Feintuning der Schlaflogik, fertig für finale Version 1.0.0"
      },
      "0.5.6": {
        "en": "Added configurable sleep stability threshold (default 20 min) to fine-tune refined sleep phase detection.",
        "de": "Konfigurierbare Stabilitätsschwelle für Schlaf (Standard 20 Min) hinzugefügt, um die verfeinerte Schlafphasenerkennung zu optimieren."
      },
      "0.5.5": {
        "en": "Added combined EarlySleep & SmartSleep filter: long main-sleep blocks before cutoff time are now accepted; improved      debug output and sleep logic stability.",
        "de": "Neuer kombinierter Frühschlaf- & SmartSleep-Filter: Lange Hauptschlafphasen vor der Uhrzeitgrenze werden jetzt akzeptiert; verbesserte Debug-Ausgabe und stabilere Schlaflogik."
      },
      "0.5.4": {
        "en": "Added Debug & Advanced Options tab with toggles for debug output, smart early-sleep detection and minimum main sleep threshold.",
        "de": "Neuer Tab \"Debug & Erweiterte Optionen\" mit Schaltern für Debug-Ausgabe, intelligente Frühschlaf-Erkennung und Mindest-Schlafdauer hinzugefügt."
      },
      "0.5.3": {
        "en": "Added configurable early-sleep filter (e.g. ignore before 23:00), nap options, and intraday mode. Improved sleep logic.",
        "de": "Konfigurierbarer Frühschlaf-Filter (z. B. Ignorieren vor 23:00), Nickerchen-Optionen und Intraday-Modus hinzugefügt. Schlaflogik verbessert."
      },
      "0.5.2": {
        "en": "Added nap options and intraday mode; improved sleep logic",
        "de": "Nickerchen-Optionen und Intraday-Modus hinzugefügt; Schlaflogik verbessert"
      },
      "0.5.1": {
        "en": "Maintenance update",
        "de": "Wartungsupdate"
      },
      "0.5.0": {
        "en": "Maintenance issues",
        "de": "Wichtigste behandelte Fragen"
      },
      "0.4.14": {
        "en": "Fixed some minor bugs",
        "de": "Einige kleinere Fehler behoben"
      },
      "0.4.13": {
        "en": "make heartrate time series working",
        "de": "Herzfrequenz-Zeitreihen funktionieren jetzt"
      },
      "0.4.12": {
        "en": "changed node dependencies to node 16",
        "de": "Knotenabhängigkeiten auf Node 16 geändert"
      },
      "0.4.11": {
        "en": "Catch unpresent activity data",
        "de": "Nicht vorhandene Aktivitätsdaten abfangen"
      },
      "0.4.10": {
        "en": "fixed web page for token",
        "de": "Webseite für Token repariert"
      },
      "0.4.9": {
        "en": "Changed Repo name",
        "de": "Repo-Name geändert"
      }
    },
    "titleLang": {
      "en": "fitbit-fitness-next",
      "de": "fitbit-fitness-next",
      "ru": "Фитбит",
      "pt": "fitbit-fitness-next",
      "nl": "fitbit-fitness-next",
      "fr": "fitbit-fitness-next",
      "it": "fitbit-fitness-next",
      "es": "fitbit-fitness-next",
      "pl": "fitbit-fitness-next",
      "uk": "fitbit-fitness-next",
      "zh-cn": "fitbit-fitness-next"
    },
    "keywords": ["Fitbit", "Health", "Fitness", "Sleep", "ioBroker"],
    "license": "MIT",
    "platform": "Javascript/Node.js",
    "main": "main.js",
    "icon": "fitbit-fitness-next.png",
    "enabled": true,
    "extIcon": "https://raw.githubusercontent.com/Pocky2507/ioBroker.fitbit-fitness-next/main/admin/fitbit-fitness-next.png",
    "readme": "https://github.com/Pocky2507/ioBroker.fitbit-fitness-next/blob/main/README.md",
    "loglevel": "info",
    "mode": "daemon",
    "type": "health",
    "compact": true,
    "connectionType": "cloud",
    "dataSource": "poll",
    "materialize": true,
    "dependencies": [
      {
        "js-controller": ">=2.0.0"
      }
    ]
  },
  "native": {
    "refresh": 5,
    "token": "",
    "owntoken": false,
    "accesstoken": "",
    "bodyrecords": false,
    "activityrecords": false,
    "sleeprecords": false,
    "sleeprecordsschedule": false,
    "foodrecords": false,
    "devicerecords": true,
    "intraday": true,
    "showLastOrFirstNap": true,
    "clearNapListAtNight": true,
    "enableDailyNapClear": false,
    "forceClearNapListTime": "02:45",
    "smartNapValidationEnabled": false,
    "ignoreEarlyMainSleepEnabled": true,
    "ignoreEarlyMainSleepTime": "23:00",
    "clientId": "",
    "clientSecret": "",
    "redirectUri": "https://pocky2507.github.io/ioBroker.fitbit-fitness-next/getCode.html",
    "debugEnabled": false,
    "smartEarlySleepEnabled": true,
    "minMainSleepHours": 3,
    "sleepStabilityMinutes": 20,
    "sleepLateWakeCorrectionMinutes": 0,
    "kiEnabled": false,
    "kiMode": "disabled"
  },
  "objects": [],
  "instanceObjects": [
    {
      "_id": "info",
      "type": "channel",
      "common": { "name": "Information" },
      "native": {}
    },
    {
      "_id": "info.connection",
      "type": "state",
      "common": {
        "role": "indicator.connected",
        "name": "Device or service connected",
        "type": "boolean",
        "read": true,
        "write": true,
        "def": false
      },
      "native": {}
    },
    {
      "_id": "user",
      "type": "channel",
      "common": { "name": "User data" },
      "native": {}
    },
    {
      "_id": "user.fullName",
      "type": "state",
      "common": {
        "role": "state",
        "name": "Full name",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "user.userid",
      "type": "state",
      "common": {
        "role": "state",
        "name": "User ID on Fitbit",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "tokens",
      "type": "channel",
      "common": { "name": "Access tokens" },
      "native": {}
    },
    {
      "_id": "tokens.access",
      "type": "state",
      "common": {
        "role": "state",
        "name": "Access token",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "tokens.refresh",
      "type": "state",
      "common": {
        "role": "state",
        "name": "Refresh token",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "tokens.expire",
      "type": "state",
      "common": {
        "role": "state",
        "name": "Expire on",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "activity",
      "type": "channel",
      "common": { "name": "Activity records" },
      "native": {}
    },
    {
      "_id": "activity.Steps",
      "type": "state",
      "common": {
        "role": "value.health.steps",
        "name": "Steps",
        "type": "number",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "activity.HeartRate-ts",
      "type": "state",
      "common": {
        "role": "json",
        "name": "Intraday HR time series",
        "type": "string",
        "read": true,
        "write": false
      },
      "native": {}
    },
    {
      "_id": "activity.Floors",
      "type": "state",
      "common": {
        "role": "value.health.steps",
        "name": "Floors",
        "type": "number",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "activity.Calories",
      "type": "state",
      "common": {
        "role": "value.health.calories",
        "name": "Calories",
        "type": "number",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "activity.ActivitiesCount",
      "type": "state",
      "common": {
        "role": "value.health.steps",
        "name": "Number of daily activities",
        "type": "number",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "activity.ActiveMinutes",
      "type": "state",
      "common": {
        "role": "state",
        "name": "Active minutes",
        "type": "number",
        "unit": "Minutes",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "activity.RestingHeartRate",
      "type": "state",
      "common": {
        "role": "value.health.bpm",
        "name": "Resting heart rate",
        "type": "number",
        "unit": "bpm",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "activity.CurrentHeartRate",
      "type": "state",
      "common": {
        "role": "value.health.bpm",
        "name": "Current Heart Rate",
        "type": "number",
        "unit": "bpm",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "body",
      "type": "channel",
      "common": { "name": "Body records" },
      "native": {}
    },
    {
      "_id": "body.weight",
      "type": "state",
      "common": {
        "role": "value.health.weight",
        "name": "Weight",
        "type": "number",
        "unit": "kg",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "body.bmi",
      "type": "state",
      "common": {
        "role": "value.health.bmi",
        "name": "BMI",
        "type": "number",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "body.fat",
      "type": "state",
      "common": {
        "role": "value.health.fat",
        "name": "FAT",
        "type": "number",
        "unit": "%",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "food",
      "type": "channel",
      "common": { "name": "Food data" },
      "native": {}
    },
    {
      "_id": "food.Calories",
      "type": "state",
      "common": {
        "role": "value.health.calories",
        "name": "Calories consumed",
        "type": "number",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "food.Carbs",
      "type": "state",
      "common": {
        "role": "state",
        "name": "Carbs consumed",
        "type": "number",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "food.Fiber",
      "type": "state",
      "common": {
        "role": "state",
        "name": "Fiber consumed",
        "type": "number",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "food.Sodium",
      "type": "state",
      "common": {
        "role": "state",
        "name": "Sodium consumed",
        "type": "number",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "food.Fat",
      "type": "state",
      "common": {
        "role": "value.health.fat",
        "name": "Fat consumed",
        "type": "number",
        "unit": "%",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "food.Protein",
      "type": "state",
      "common": {
        "role": "value.health.protein",
        "name": "Protein consumed",
        "type": "number",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "food.Water",
      "type": "state",
      "common": {
        "role": "state",
        "name": "Water consumed",
        "type": "number",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep",
      "type": "channel",
      "common": { "name": "Sleep data" },
      "native": {}
    },
    {
      "_id": "sleep.Deep",
      "type": "state",
      "common": {
        "role": "state",
        "name": "Deep sleep time",
        "type": "number",
        "unit": "Minutes",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Light",
      "type": "state",
      "common": {
        "role": "state",
        "name": "Light sleep time",
        "type": "number",
        "unit": "Minutes",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Rem",
      "type": "state",
      "common": {
        "role": "state",
        "name": "REM sleep time",
        "type": "number",
        "unit": "Minutes",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Wake",
      "type": "state",
      "common": {
        "role": "state",
        "name": "Wake time",
        "type": "number",
        "unit": "Minutes",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.AsleepTotal",
      "type": "state",
      "common": {
        "role": "value",
        "name": "Total minutes asleep (incl. naps)",
        "type": "number",
        "unit": "min",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.InBedTotal",
      "type": "state",
      "common": {
        "role": "value",
        "name": "Total minutes in bed (incl. naps)",
        "type": "number",
        "unit": "min",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Main.FellAsleepAt",
      "type": "state",
      "common": {
        "role": "text",
        "name": "Main sleep - fell asleep at (ISO)",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Main.FellAsleepAtLocal",
      "type": "state",
      "common": {
        "role": "text",
        "name": "Main sleep - fell asleep at (local de-DE)",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Main.WokeUpAt",
      "type": "state",
      "common": {
        "role": "text",
        "name": "Main sleep - woke up at (ISO)",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Main.WokeUpAtLocal",
      "type": "state",
      "common": {
        "role": "text",
        "name": "Main sleep - woke up at (local de-DE)",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.HRDropAtSleep",
      "type": "state",
      "common": {
        "role": "value.health.bpm",
        "name": "Heart rate drop at sleep begin",
        "type": "number",
        "unit": "bpm",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.HRBeforeSleep",
      "type": "state",
      "common": {
        "role": "value.health.bpm",
        "name": "Heart rate before falling asleep",
        "type": "number",
        "unit": "bpm",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.HRAfterSleep",
      "type": "state",
      "common": {
        "role": "value.health.bpm",
        "name": "Heart rate after falling asleep",
        "type": "number",
        "unit": "bpm",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.History",
      "type": "channel",
      "common": { "name": "Sleep History" },
      "native": {}
    },
    {
      "_id": "sleep.History.JSON",
      "type": "state",
      "common": {
        "name": "History of sleep data (JSON)",
        "type": "string",
        "role": "json",
        "read": true,
        "write": false
      },
      "native": {}
    },
    {
      "_id": "sleep.History.LastEntry",
      "type": "state",
      "common": {
        "name": "Last history entry",
        "type": "string",
        "role": "json",
        "read": true,
        "write": false
      },
      "native": {}
    },
    {
      "_id": "sleep.Naps.Asleep",
      "type": "state",
      "common": {
        "role": "value",
        "name": "Minutes asleep in naps",
        "type": "number",
        "unit": "min",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Naps.InBed",
      "type": "state",
      "common": {
        "role": "value",
        "name": "Minutes in bed during naps",
        "type": "number",
        "unit": "min",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Naps.Count",
      "type": "state",
      "common": {
        "role": "value",
        "name": "Number of naps",
        "type": "number",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Naps.FellAsleepAt",
      "type": "state",
      "common": {
        "role": "text",
        "name": "Nap - fell asleep at (ISO)",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Naps.FellAsleepAtLocal",
      "type": "state",
      "common": {
        "role": "text",
        "name": "Nap - fell asleep at (local de-DE)",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Naps.WokeUpAt",
      "type": "state",
      "common": {
        "role": "text",
        "name": "Nap - woke up at (ISO)",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Naps.WokeUpAtLocal",
      "type": "state",
      "common": {
        "role": "text",
        "name": "Nap - woke up at (local de-DE)",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "sleep.Naps.List",
      "type": "state",
      "common": {
        "role": "text",
        "name": "List of today naps as JSON",
        "type": "string",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "devices",
      "type": "channel",
      "common": { "name": "FITBIT Devices" },
      "native": {}
    },
    {
      "_id": "activity.heartratezones.OutOfRange.minutes",
      "type": "state",
      "common": {
        "role": "value.health",
        "name": "OutOfRange zone minutes",
        "type": "number",
        "unit": "min",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "activity.heartratezones.FatBurn.minutes",
      "type": "state",
      "common": {
        "role": "value.health",
        "name": "FatBurn zone minutes",
        "type": "number",
        "unit": "min",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "activity.heartratezones.Cardio.minutes",
      "type": "state",
      "common": {
        "role": "value.health",
        "name": "Cardio zone minutes",
        "type": "number",
        "unit": "min",
        "read": true,
        "write": true
      },
      "native": {}
    },
    {
      "_id": "activity.heartratezones.Peak.minutes",
      "type": "state",
      "common": {
        "role": "value.health",
        "name": "Peak zone minutes",
        "type": "number",
        "unit": "min",
        "read": true,
        "write": true
      },
      "native": {}
    }
  ]
}
